<!--Form used to provide the PROFILE UPDATE feature-->

<div 
  class=" app-central-container-sm app-fade-in"
  [ngClass]="{'app-open': formOpen}"
  >


  <!-- Form Header -->

  <app-form-header  headerType        = "center" 
                    headerIcon        = "person"
                    headerTitle       = "Update Profile" 
                    headerTheme       = "app-account-header-theme"
                    [headerClose]     = "closeForm">
  </app-form-header>

  <!-- Start of Form -->

  <div class=" app-scroll-frame-center app-card-bottom-corners app-whiteframe-2dp">
    <div class="app-form-theme px-0 pt-3">
      <form #profileForm = "ngForm" role="form" novalidate
            (ngSubmit)="userListAction(profileForm)">
        <div class="d-flex flex-column px-2">


          <div class="d-flex flex-row justify-content-start app-flex-1 align-items-center 
                      app-black-text-low app-bold  mt-3 app-smaller-font">
            Users with access to my Shared Recipes:
          </div>

          <!-- Default Shared Recipe Users field -->
          <div class="d-flex flex-row justify-content-start align-items-center">
            <div class="app-width-90">
              <app-list-item-field  
                [fForm]         = "profileForm"
                [fCheckAll]     = "checkAll"
                fName           = "itemName"
                fRef            = "iName"
                [(fValue)]      = "selectedItem"
                fLabel          = "Authorized Users" 
                fIcon           = "mail_outline" 
                fColor          = "app-accent1"
                [fRequired]     = "false"
                [fOnFocus]      = "clearRequestStatus"
                [fOnChange]     = "copyItemName"
                [fOnDelete]     = "deleteSelectedItem"
                [fList]         = "itemList"
                fListValue      = "index"
                [fEqual]        = "false"
                fNewTest        = ""
                fNewName        = "newIName"
                fNewRef         = "nIName"
                fNewLabel       = "Authorized User" 
                [(fNewValue)]   = "newItemName">
              </app-list-item-field>
            </div>
          <div class="app-item-list-clear-btn">
          <i class="material-icons app-input-icon app-warn app-cursor-pointer app-icon-xsm"
              data-toggle="tooltip" data-placement="top" title="Clear List" data-delay="200"
              (click)="clearItemList()">close</i>            
        </div>
      </div>

           <!-- Status Message Area -->
          <app-form-messages  [fMessageOpen]  ="haveStatusMessages()">
            <app-messages [mList]="requestStatus" [mMax]="2">
              <app-message name="formHasErrors" class="app-error">
                Please correct the fields with errors.
              </app-message>
              <app-message name="listItemAdded" class="app-success">
                List item added.
              </app-message>
              <app-message name="listItemRemoved" class="app-success">
                List item removed.
              </app-message>
              <app-message name="itemListCleared" class="app-success">
                Item list cleared.
              </app-message>
              <app-message name="listItemUpdated" class="app-success">
                List item updated.
              </app-message>
              <app-message name="itemAlreadyInList" class="app-error">
                Item already in list.
            </app-message>
          </app-messages>
          </app-form-messages>                    

        </div>
                            
          <!-- Actions Area -->
          <div class="d-flex flex-row justify-content-center align-items-center app-bg-primary 
                      app-pos-relative pb-2"> 
                  <app-help-button></app-help-button>
                  <app-fab 
                    fType       = "button"
                    fLabel      = "Update"
                    fLabelCSS   = "app-white"
                    [fOpen]     = "true"
                    fButtonCSS  = "app-fab-sm-sq app-bg-primary mt-1"
                    [fDelay]    = "200"
                    [fOnClick]  = "submitUpdate"
                    [fParam]    = "profileForm"
                    fAria       = "update"
                    fIcon       = "check_circle_outline"
                    fIconCSS    = "app-fab-icon-sm app-mt--2"
                    fIconColor  = "app-white">
            </app-fab>
          </div>
          
        </form>
    </div>
  </div>
</div>
